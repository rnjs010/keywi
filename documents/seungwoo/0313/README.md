# 회의록

날짜: 2025년 3월 13일

<aside>
🎯 **개요 : 개요 작성**

</aside>

# 💬 논의 내용

---

## 1. 소셜 로그인

- 채널 2개면 각각 다른 계정처리? 아니면 한 사람으로 처리?(어뷰징 방지를 위해 한 채널만 유지하는거 추천) - DI값(pass) 해줘야함(본인인증이 필요함)
- 개인정보인 프로필 사진 같은건 s3 에 하면 문제

## 2. SNS

### [추천 알고리즘]

- 팔로우/팔로잉 → 클러스트 인덱스(날짜순)으로 별 SORT 없이(top 10) 가져오기
- 관심 추천 → 리얼타임? rdb로는 문제가 있음 추천수를 db로 하기엔 무리(log로 쓰기 - 리스트 땡겨서 처리 → 중복연산안하려고 캐시)
- 2주치 배치(스케줄러)서버를 통해서 인기 피드 가져오기 (로그 db를 따로 분리해서 땡기기)

### [이미지]

- 상품 정보를 저장하는 메타 테이블(상품 중복을 막기 위한)
- 쿼리 힘들 것으로 예상

### [해시태그]

## 3. 키위페이

매력적이진 않지만 완성도 업, 기술력 잘모르겠음(들어가는 시간에 비해 인정x)

덜어낼 후보

취소. 매력적임!

1원 송금으로 본인인증 털어버리기

어렵지 않게 만들 수 있을듯함. 얻는게 많을 듯.

FM 대로 하지 않고 카톡 본인인증을 태울 수 있긴한데, 법적으로 큰 문제 없으면 지금 플로우대로 하는것도 괜찮다.

## 4. 마이페이지

덜어낼 후보

## 5. 알림

필수인듯(넣도록)

## 6. 검색

1일마다 스케줄링이 젤 안정적이다.

보통 회사였으면, 강제로 동기화 시켜주는걸 설정할 것.

이름이나 상품은 1시간 배치로하고 가볍게 해도 될 거 같음.

1일배치 CSV파일로 할거면 스케줄서버 따로 떼서 해야함. (JOB 서버가 10초간격으로 땡겨서 함) → 10초동안 갱신이 안될 가능성이 있음. 

카프카… 는 선택

JOB QUEUE 사용 (Redis 락은 별로)

⇒ 좋은데… 고도화될수록 망가짐.

## 7. ERD

묶기 - 피드1, 대표이미지1, 태그 여러개 

좋아요 북마크 댓글 - 유동적으로 바뀌는 아이들 - Redis?? - RDB (무리 안될듯, 벌크로 밀어넣는 방법, 로그량이 많으면 데이터파이프라인 설계하나… 우리는 좀 작아서…)

MongoDB - 안쓸듯… 관리포인트 늘어남, 쓰고 버리고 할거면 고스펙일수도, redis 2개 돌려도 될지도.. 게시물 이미지/영상 S3 훨씬 빠름, 게시물 메타데이터(redis 추천), 최대한 날리는 것을 추천. 

좋아요 취소 - 중복 저장 필요, 1개에다가 좋아요/좋아요 취소 관리 (북마크도 같음)

좋아요,북마크,댓글 카운트 - redis 에 저장, DB 에 싱크 안되어도 괜춘(rough 해도 됨), 일배치로 한번씩 땡겨와도 됨

인기게시물 -  스키마 확 늘리기, 캐싱, 20개 정도, RDB 안가게 다 밀어넣을것같음

카프카 - 좋아요,북마크,댓글 : 싱크 깨져도 되고, redis 업셋이 있고 심플해서 다량 접속시 잃을 여지가 큐안에 세워도 괜춘할듯…?? 로그처리해서 3개 테이블 스케쥴해서 연산해서 → 몽고냐 DB냐…취향차이임(자유도있게선택) 

원래 로그 DB는 mysql 하나 더 파야하지만.. 우리는 같이..

## 8. 중앙계좌 관련

관리 계좌 1개로 통일?  일회용계좌 있으면 그거 쓸듯.

계좌 100개 찍어버려서 그거 그냥 써도 됨.

계좌번호, 간편결제 비밀번호 암호화 여부 - 저장한다면 무조건 암호화하는게 맞음(client에서 암호화하고 서버에서도 못풀어야 함) 

채팅 기록 - redis, mongoDB(RDB의 불리함 어필), mySQL 알아서 사용하면 됨

## 9. 인프라 MSA

최대 효율은 도와줘야지… 컨님 천사…엔젤…. 쵝오 졸귀탱

프론트 client, 사용자와 직접 붙으면 public임.

## 10. Elasticsearch

데이터 동기화를 실시간으로 애플리케이션 단에서 near realtime으로 하는 것과

batch 서버를 활용하여 스케줄링(bulk api 활용) 하는 방법 중 선택 고민

→ 페르소나에 대해서 잘 파악하고 적용하면 된다. 

현재 페르소나: sns 기능 위주로 피드 활성화 가능성 → 데이터 업데이트가 많다면 ES에 자주 업데이트를 요청해야한다. 피드 생성, 좋아요, 댓글 등에 대해서 업데이트 부담이 많아지면 부담이 생김

애플리케이션 단에서 로직을 부담해야하므로 애플리케이션 서버의 부하가 증가한다.

⇒ batch 서버를 활용하여 전체인덱싱 + 부분인덱싱

그리고 이렇게 한다고 가정했을 때 redis key lock 으로 분산처리도 괜찮지만 job queue로도 생각해보고 장단점 및 개발 리소스 따져서 선택하여 개발하면 좋을 것 같다

일단 개발 전체적으로 완성이 되어야하기 때문에 배치를 하나로 묶어서 인덱싱 하는 것으로 일단 고려해보자.

시퀀스 다이어그램은 전, 후를 파악할 수 있어서 …? 잘 기억이 안난다. 일단 들었을 때 시퀀스 다이어그램을 왜 작성해야하고 어떻게 도움이 되는지가 느껴졌다. 하지만 모든 기능에 대해서 할 수 없으니, 일단은 개발공수가 많이 들어가기 때문에 핵심적인 부분만 시퀀스를 작성하자. 예) batch 파트

### ⇒ 다이어트 필요..(줄여야함) 빼도 티안나는 기술들이 많음, 시퀀스다이어그램 그리기….(메인기능만)

# 📌결정

---